<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Process Tracker Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .card {
            @apply bg-white rounded-lg shadow-md p-6;
        }
        .stat-value {
            @apply text-3xl font-bold text-gray-800;
        }
        .stat-label {
            @apply text-sm text-gray-600 mb-2;
        }
        .status-active {
            @apply inline-block w-2 h-2 bg-green-500 rounded-full;
        }
        .status-idle {
            @apply inline-block w-2 h-2 bg-gray-400 rounded-full;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">
    <!-- Header -->
    <header class="bg-white shadow-sm border-b">
        <div class="container mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <div>
                    <h1 class="text-2xl font-bold text-gray-800">Process Tracker</h1>
                    <p class="text-sm text-gray-600">轻量级进程监控</p>
                </div>
                <div class="flex items-center space-x-4">
                    <select id="period-selector" class="px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option value="today">今日</option>
                        <option value="week">本周</option>
                        <option value="month">本月</option>
                    </select>
                    <div class="flex items-center space-x-2">
                        <span class="status-active animate-pulse"></span>
                        <span class="text-sm text-gray-600">实时监控</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-6">
        <!-- Overview Cards -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-6">
            <div class="card">
                <div class="stat-label">活跃进程</div>
                <div class="stat-value" id="active-count">-</div>
                <div class="text-xs text-gray-500 mt-1">
                    总进程: <span id="total-count">-</span>
                </div>
            </div>
            
            <div class="card">
                <div class="stat-label">平均CPU (归一化)</div>
                <div class="stat-value" id="avg-cpu">-</div>
                <div class="text-xs text-gray-500 mt-1">
                    峰值: <span id="max-cpu">-</span> | 
                    总核心: <span id="total-cpu-cores">-</span>
                </div>
            </div>
            
            <div class="card">
                <div class="stat-label">进程总内存</div>
                <div class="stat-value text-base" id="total-memory">-</div>
                <div class="text-xs text-gray-500 mt-1">
                    峰值: <span id="max-memory">-</span>
                </div>
                <div class="text-xs text-gray-400 mt-1">
                    系统总计: <span id="system-total-memory">-</span>
                </div>
            </div>
            
            <div class="card">
                <div class="stat-label">系统状态</div>
                <div class="stat-value text-green-600" id="system-status">正常</div>
                <div class="text-xs text-gray-500 mt-1">
                    更新: <span id="last-update">-</span>
                </div>
            </div>
        </div>

        <!-- Charts -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
            <div class="card">
                <h3 class="text-lg font-semibold mb-4">CPU使用率趋势</h3>
                <canvas id="cpuChart"></canvas>
            </div>
            
            <div class="card">
                <h3 class="text-lg font-semibold mb-4">内存使用趋势</h3>
                <canvas id="memoryChart"></canvas>
            </div>
        </div>

        <!-- Top Processes -->
        <div class="card">
            <div class="flex items-center justify-between mb-4">
                <h3 class="text-lg font-semibold">进程列表</h3>
                <div class="flex items-center space-x-4">
                    <!-- Search Box -->
                    <input 
                        type="text" 
                        id="process-search" 
                        placeholder="🔍 搜索进程..."
                        class="px-3 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"
                        style="width: 200px;"
                    />
                    
                    <!-- Filter Buttons -->
                    <div class="flex items-center space-x-2">
                        <span class="text-xs text-gray-600">筛选:</span>
                        <button class="filter-btn px-3 py-1 text-sm rounded bg-blue-100 text-blue-600" data-filter="">全部</button>
                        <button class="filter-btn px-3 py-1 text-sm rounded hover:bg-gray-100" data-filter="docker">🐳 Docker</button>
                        <button class="filter-btn px-3 py-1 text-sm rounded hover:bg-gray-100" data-filter="development">💻 开发</button>
                        <button class="filter-btn px-3 py-1 text-sm rounded hover:bg-gray-100" data-filter="browser">🌐 浏览器</button>
                    </div>
                    
                    <!-- Sort Buttons -->
                    <div class="flex items-center space-x-2 border-l pl-4">
                        <span class="text-xs text-gray-600">排序:</span>
                        <button class="sort-btn px-3 py-1 text-sm rounded bg-blue-100 text-blue-600" data-sort="cpu">CPU</button>
                        <button class="sort-btn px-3 py-1 text-sm rounded hover:bg-gray-100" data-sort="memory">内存</button>
                        <button class="sort-btn px-3 py-1 text-sm rounded hover:bg-gray-100" data-sort="name">名称</button>
                    </div>
                </div>
            </div>
            
            <div class="overflow-x-auto">
                <table class="w-full">
                    <thead class="bg-gray-50 border-b">
                        <tr>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">PID</th>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">进程名</th>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">CPU %</th>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">内存</th>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">运行时长</th>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">状态</th>
                        </tr>
                    </thead>
                    <tbody id="process-table-body" class="divide-y divide-gray-200">
                        <!-- Processes will be inserted here -->
                    </tbody>
                </table>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="container mx-auto px-4 py-6 text-center text-sm text-gray-600">
        <p>Process Tracker v0.4.0 - 轻量级进程监控工具</p>
    </footer>

    <script src="js/app.js"></script>
</body>
</html>
