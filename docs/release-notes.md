# Process Tracker 发布说明

## v0.4.0 (2025-01) - Web界面修复与增强

### 🐛 关键Bug修复
- ✅ **修复去重逻辑**: 使用PID而非进程名作为唯一标识
  - 之前：6个nginx worker只显示1个
  - 现在：正确显示所有同名进程
- ✅ **修复数据缺失**: 添加memory_percent、category、command字段
  - 支持内存百分比显示："15.2% (1.5 GB)"
  - 支持分类过滤（Docker/开发/浏览器）
  - 支持命令行搜索
- ✅ **修复CPU显示不一致**: 统一使用归一化值（0-100%）
  - 统计卡片和进程列表显示一致

### 🔧 系统鲁棒性提升
- ✅ **时间窗口扩大**: 从1分钟扩大到5分钟
  - 监控短暂中断不影响数据展示
  - 提高系统容错能力

### 📚 文档整理
- ✅ 清理冗余文档，归档历史报告
- ✅ 保留核心用户文档：ALERTS.md、FEATURES.md、QUICKSTART.md
- ✅ 代码变更最小化（50行），符合简洁原则

### 🎯 测试覆盖
- ✅ Phase 1测试套件（28个测试全部通过）
  - core/alerting_test.go - 告警系统测试
  - core/storage_test.go - 存储系统测试
  - core/error_handling_test.go - 错误处理测试

---

## v0.3.9 (2025-01) - Web界面与归一化CPU

### 🌐 Web实时监控
- ✅ 实时可视化仪表板
- ✅ CPU/内存趋势图表
- ✅ 进程搜索和分类过滤
- ✅ 自动刷新（5秒）

### 📊 CPU归一化显示
- ✅ CPU显示为0-100%（表示整个系统）
- ✅ 72核系统，1核满载显示为1.39%
- ✅ 更直观反映系统负载
- ✅ 图表Y轴0-100%范围

### 💾 内存百分比
- ✅ 内存同时显示MB和百分比
- ✅ 格式：24GB (7.52%)
- ✅ 一目了然系统内存压力

### 🎛️ 守护进程管理
- ✅ start/stop/restart/status命令
- ✅ PID文件管理
- ✅ 优雅关闭（5秒超时）
- ✅ SIGTERM信号处理

### 🌐 网络IP自动发现
- ✅ 启动时显示所有内网IP
- ✅ 多网卡支持
- ✅ 自动过滤loopback

### 🐳 Docker监控增强
- ✅ 自动检测Docker容器
- ✅ 容器级资源统计
- ✅ Web界面分类过滤

---

## v0.3.8 (2024-12) - 内存百分比与存储优化

### 新功能
- 添加MemoryPercent字段
- 系统总内存缓存
- 存储格式v6（17字段）

### 改进
- 内存使用更直观
- 向后兼容v5格式

---

## v0.3.7 (2024-11) - 存储管理重构

### 主要特性
- 自动文件轮转
- 自动压缩旧文件
- 自动清理过期数据
- 配置大幅简化（3个参数）

### 存储优化
- 节省90%磁盘空间
- 批量写入机制
- 文件大小限制

---

## v0.3.6 (2024-10) - Docker监控

### 新功能
- Docker容器监控
- 自动检测Docker环境
- 容器级资源统计

---

## v0.3.5 (2024-09) - 智能分类

### 新功能
- 智能进程分类
- 自动识别应用类型
- 可配置分类规则

---

## v0.3.0-0.3.4 - 早期版本

### 基础功能
- 进程资源监控
- CSV数据存储
- 统计报表
- 数据导出

---

## 升级指南

### 从v0.3.8升级到v0.3.9+
1. 停止旧版本：`./process-tracker-old stop`
2. 替换可执行文件
3. 启动新版本：`./process-tracker start --web`
4. 数据自动兼容，无需迁移

### 数据格式兼容性
- v7 (18字段)：支持CPU归一化和内存百分比
- v6 (17字段)：支持内存百分比
- v5 (16字段)：基础格式

所有版本数据可混合使用，自动识别格式。

---

## 已知问题

### v0.3.9+
- 进程级网络流量监控未实现（显示为0）
- Docker监控需要用户在docker组

---

## 计划功能

### v0.4.0
- [ ] 告警系统
- [ ] Webhook通知
- [ ] 钉钉/飞书集成
- [ ] 自定义监控规则

### v0.5.0
- [ ] 多机器监控
- [ ] 中心化Dashboard
- [ ] 历史趋势分析
- [ ] 性能基线对比

---

**持续更新中...** 🚀
